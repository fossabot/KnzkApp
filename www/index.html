<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * knzkapp: data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">

    <script src="components/onsenui/js/onsenui.min.js"></script>
    <link rel="stylesheet" href="components/onsenui/css/onsenui.min.css">
    <link rel="stylesheet" href="components/onsenui/css/onsen-css-components.min.css">
<!-- for Testing
    <script src="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.8.3/js/onsenui.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.8.3/css/onsenui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/onsen/2.8.3/css/onsen-css-components.css">
-->

    <script src="lib/jquery-3.2.1.slim.min.js" async></script>
    <script src="lib/twitter.relative.time.min.js" async></script>
    <script src="lib/fetch.js" async></script>
    <script src="lib/atrament.min.js" async></script>
    <script src="https://twemoji.maxcdn.com/2/twemoji.min.js?2.3.1" async></script>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/enquete.css">
    <link rel="stylesheet" href="css/theme/default.css">
    <link rel="stylesheet" href="css/custom-size.css">
    <link rel="stylesheet" id="theme_css">
    <link rel="stylesheet" id="css_toolbar_android">

    <script>
        var now_TL = "local";
        var last_load_TL = "";
        var tmp_post_text = "";
        var toot_new_id = "";
        var toot_old_id = "";
        var account_toot_old_id = "";
        var account_page_id = "";
        var alert_new_id = "";
        var alert_old_id = "";
        var more_status_id = "";
        var more_acct_id = "";
        var tmp_bbcode_id = "";
        var tmp_bbcode_limit = "";
        var tmp_bbcode_tootbutton = "";
        var emoji_list = Array();
        var emoji_num_a = Array();
        var emoji_num = 0;
        var account_page_acct = "";
        var tmp_text_pre = "";
        var tmp_post_reply = 0;
        var tmp_post_visibility = "";
        var follow_old_id = "";
        var tmp_media_del_id = 0;
        var tmp_media_del_obj = "";
        var tag_old_id = "";
        var tag_str = "";
        var list_old_id = "";
        var old_TL_ws = null;
        var image_mode = "";
        var old_page = "";
        var inst_domain = "";
        var inst_login_cid = "";
        var inst_login_scr = "";
        var inst = "";
        var home_auto_event = false;
        var home_auto_tmp = "";
        var home_auto_mode = true;
        var home_auto_num = 0;
        var toot_limit = 500;
        var doodle_old_color = null;
        var doodle_mode = null;
        var pageid = "";
        var default_post_visibility = "";
        var default_sensitive = false;
    </script>

    <script src="js/config.js"></script>
    <script src="js/components.js"></script>
    <script src="js/login.js"></script>
    <script src="js/toot_new.js"></script>
    <script src="js/toot.js"></script>
    <script src="js/timeline.js"></script>
    <script src="js/account.js"></script>
    <script src="js/list.js"></script>
    <script src="js/music.js"></script>
    <script src="js/search.js"></script>
    <script src="js/doodle.js"></script>
    <script src="js/init.js"></script>

    <audio id="music-control"></audio>
</head>
<body>
<ons-splitter>
    <ons-splitter-side id="splitter-menu" side="left" width="280px" collapse>
        <ons-page>
            <ons-list>
                <ons-list-item class="splitter-profile-item" id="splitter-profile-bg">
                    <div class="splitter-profile">
                        <img src="img/missing.png" id="splitter-icon" class="user-logo" onclick="show_account(localStorage.getItem('knzkapp_now_mastodon_id'), true)"/>
                        <p>
                        <h4 id="splitter-profile-name" class="acct-small" style="height: 20px;"></h4>
                        </p>
                    </div>
                </ons-list-item>
                <ons-list-item tappable onclick="account_change_list()">
                    <div class="center list-item-small">
                        @<span id="account_change-username"></span>
                    </div>
                    <div class="right list-item-small">
                        <ons-icon icon="fa-caret-down"></ons-icon>
                    </div>
                </ons-list-item>
            </ons-list>

            <div id="menu-list-base">
                <div id="account-list" style="display: none;">
                    <ons-list>
                        <ons-list-item modifier="chevron" tappable onclick="open_addaccount()">
                            <label class="left music-item">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-plus fa fa-fw"></i>
                            </label>
                            <div class="center music-item">
                                アカウント追加
                            </div>
                        </ons-list-item>
                        <div id="account-list-other"></div>
                    </ons-list>
                </div>

                <div id="menu-list">
                    <ons-list>
                        <ons-search-input placeholder="検索" onkeydown="SearchKey();" input-id="nav-search" class="w-max nav-search"></ons-search-input>
                        <ons-list-header>ナビゲーション</ons-list-header>
                        <ons-list-item modifier="chevron" tappable onclick="loadNav('post.html', 'up', true, true);">
                            <label class="left music-item">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-pencil fa fa-fw"></i>
                            </label>
                            <div class="center music-item">
                                新規トゥート
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="openTL()">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-home fa fa-fw"></i>
                            </div>
                            <div class="center">
                                タイムライン
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="openTL('alert')">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-bell fa fa-fw"></i>
                            </div>
                            <div class="center">
                                通知
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="list('favourites', 'お気に入り一覧', null, 'toot')" id="menu-fav-page" class="invisible">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-star fa fa-fw"></i>
                            </div>
                            <div class="center">
                                お気に入り一覧
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="list('follow_requests', 'フォローリクエスト', null, 'acct')" id="menu-followreq" class="invisible">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-users fa fa-fw"></i>
                            </div>
                            <div class="center">
                                フォローリクエスト
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="load('usermenu.html')">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-ellipsis-h fa fa-fw"></i>
                            </div>
                            <div class="center">
                                ユーザーメニュー
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="load('config.html')">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-cog fa fa-fw"></i>
                            </div>
                            <div class="center">
                                設定
                            </div>
                        </ons-list-item>
                        <ons-list-item modifier="chevron" tappable onclick="music_change()">
                            <div class="left">
                                <i class="list-item__icon list-item--chevron__icon ons-icon fa-music fa fa-fw"></i>
                            </div>
                            <div class="center">
                                <span class="list-item__title">Radio</span><span class="list-item__subtitle" id="music_title">Listen.moe</span>
                            </div>
                        </ons-list-item>
                    </ons-list>
                </div>

                <form id="music-form" style="display: none;">
                    <ons-list>
                        <ons-list-item>
                            <div class="left" onclick="music_change()">
                                <i class="list-item__icon ons-icon fa-chevron-left fa fa-fw"></i> 戻る
                            </div>
                            <div class="right" onclick="music_set('music-button')">
                                <i class="list-item__icon ons-icon fa-play fa fa-fw" id="music-button"></i>
                            </div>
                        </ons-list-item>
                        <ons-list-header>Channel</ons-list-header>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" input-id="listen-moe" value="listen-moe" checked></ons-radio></label>
                            <label for="listen-moe" class="center music-item">Listen.moe</label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" input-id="AnimeNfo-Radio" value="AnimeNfo-Radio"></ons-radio></label>
                            <label for="AnimeNfo-Radio" class="center music-item">AnimeNfo Radio</label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="LoFi-hip-hop-Radio" input-id="LoFi-hip-hop-Radio"></ons-radio></label>
                            <label for="LoFi-hip-hop-Radio" class="center music-item">LoFi hip hop Radio</label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="Poolside-fm" input-id="Poolside-fm"></ons-radio></label>
                            <label for="Poolside-fm" class="center music-item">Poolside.fm</label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="dubplate-fm" input-id="dubplate-fm"></ons-radio></label>
                            <label for="dubplate-fm" class="center music-item">Drum 'n Bass   <small>(dubplate.fm)</small></label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="FUTURE-BASS-MIX" input-id="FUTURE-BASS-MIX"></ons-radio></label>
                            <label for="FUTURE-BASS-MIX" class="center music-item">FUTURE-BASS-MIX</label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="TOP-40-RU" input-id="TOP-40-RU"></ons-radio></label>
                            <label for="TOP-40-RU" class="center music-item">TOP 40 RU   <small>(European Hit Radio)</small></label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="REMIXES-RU" input-id="REMIXES-RU"></ons-radio></label>
                            <label for="REMIXES-RU" class="center music-item">REMIXES RU   <small>(European Hit Radio)</small></label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="danceradiouk" input-id="danceradiouk"></ons-radio></label>
                            <label for="danceradiouk" class="center music-item">danceradiouk   <small>(Box UK Radio)</small></label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="FMHIPHOP-COM" input-id="FMHIPHOP-COM"></ons-radio></label>
                            <label for="FMHIPHOP-COM" class="center music-item">FMHIPHOP.COM</label>
                        </ons-list-item>
                        <ons-list-item tappable onclick="music_set('music-button',true)">
                            <label class="left music-item"><ons-radio name="channel" value="DEEP-RADIO" input-id="DEEP-RADIO"></ons-radio></label>
                            <label for="DEEP-RADIO" class="center music-item">DEEP RADIO</label>
                        </ons-list-item>
                    </ons-list>
                </form>
            </div>
        </ons-page>
    </ons-splitter-side>
    <ons-splitter-content id="splitter-content" page="init.html"></ons-splitter-content>
</ons-splitter>

<ons-template id="usermenu.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="fn.open()">
                    <ons-icon icon="fa-bars"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center">ユーザーメニュー</div>
        </ons-toolbar>
        <ons-list>
            <ons-list-item modifier="chevron" tappable onclick="list('favourites', 'お気に入り一覧', null, 'toot', true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-star fa fa-fw"></i>
                </div>
                <div class="center">
                    お気に入り一覧
                </div>
            </ons-list-item>
            <ons-list-item modifier="chevron" tappable onclick="list('pin', '固定トゥート一覧', null, 'toot', true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-thumb-tack fa fa-fw"></i>
                </div>
                <div class="center">
                    固定したトゥート
                </div>
            </ons-list-item>
            <ons-list-item modifier="chevron" tappable onclick="list('timelines/direct', 'ダイレクトメッセージ一覧', null, 'toot', true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-envelope fa fa-fw"></i>
                </div>
                <div class="center">
                    ダイレクトメッセージ
                </div>
            </ons-list-item>
            <ons-list-item modifier="chevron" tappable onclick="list('follow_requests', 'フォローリクエスト', null, 'acct', true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-users fa fa-fw"></i>
                </div>
                <div class="center">
                    フォローリクエスト
                </div>
            </ons-list-item>
            <ons-list-item modifier="chevron" tappable onclick="list('mutes', 'ミュート一覧', null, 'acct', true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-volume-off fa fa-fw"></i>
                </div>
                <div class="center">
                    ミュートしたユーザー
                </div>
            </ons-list-item>
            <ons-list-item modifier="chevron" tappable onclick="list('blocks', 'ブロック一覧', null, 'acct', true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-ban fa fa-fw"></i>
                </div>
                <div class="center">
                    ブロックしたユーザー
                </div>
            </ons-list-item>
        </ons-list>
    </ons-page>
</ons-template>

<template id="init.html">
    <ons-page>
        <ons-navigator id="navigator" page="home.html" swipeable></ons-navigator>
    </ons-page>
</template>

<ons-template id="home.html">
    <ons-page id="home">
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="TL_prev()">
                    <ons-icon icon="fa-angle-left"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center" onclick="scrollTL()"><span id="home_title">ローカル</span> <span class="notification invisible" id="home_title_unread">1</span></div>
            <div class="right">
                <ons-toolbar-button onclick="showTL(null, null, null, true)">
                    <ons-icon icon="fa-refresh"></ons-icon>
                </ons-toolbar-button>
                <ons-toolbar-button onclick="TL_next()">
                    <ons-icon icon="fa-angle-right"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <ons-carousel fullscreen auto-scroll id="carousel" auto-scroll-ratio="0.5">
            <ons-carousel-item id="local_item" class="home_carousel">
                <div id="local_main">
                    <div class="loading-now">
                        <ons-progress-circular indeterminate></ons-progress-circular>
                    </div>
                </div>
            </ons-carousel-item>
            <ons-carousel-item id="home_item" class="home_carousel">
                <div id="home_main">
                    <div class="loading-now">
                        <ons-progress-circular indeterminate></ons-progress-circular>
                    </div>
                </div>
            </ons-carousel-item>
            <ons-carousel-item id="local_media_item" class="home_carousel">
                <div id="local_media_main">
                    <div class="loading-now">
                        <ons-progress-circular indeterminate></ons-progress-circular>
                    </div>
                </div>
            </ons-carousel-item>
            <ons-carousel-item id="public_media_item" class="home_carousel">
                <div id="public_media_main">
                    <div class="loading-now">
                        <ons-progress-circular indeterminate></ons-progress-circular>
                    </div>
                </div>
            </ons-carousel-item>
            <ons-carousel-item id="public_item" class="home_carousel">
                <div id="public_main">
                    <div class="loading-now">
                        <ons-progress-circular indeterminate></ons-progress-circular>
                    </div>
                </div>
            </ons-carousel-item>
        </ons-carousel>
        <ons-speed-dial position="bottom right" direction="up" onclick="opendial()" id="dial_main" class="invisible">
            <ons-fab>
                <ons-icon icon="fa-bell" id="dial-icon"></ons-icon>
            </ons-fab>
        </ons-speed-dial>
        <ons-speed-dial position="bottom right" direction="up" id="dial_TL" class="invisible">
            <ons-fab>
                <ons-icon icon="fa-users" id="speeddial_icon"></ons-icon>
            </ons-fab>
            <ons-speed-dial-item onclick="openTL('alert_nav')">
                <ons-icon icon="fa-bell"></ons-icon>
            </ons-speed-dial-item>
            <ons-speed-dial-item onclick="TL_change(1)">
                <ons-icon icon="fa-home"></ons-icon>
            </ons-speed-dial-item>
            <ons-speed-dial-item onclick="TL_change(0)">
                <ons-icon icon="fa-users"></ons-icon>
            </ons-speed-dial-item>
            <ons-speed-dial-item onclick="TL_change(4)">
                <ons-icon icon="fa-globe"></ons-icon>
            </ons-speed-dial-item>
            <ons-speed-dial-item onclick="TL_change(2)">
                <ons-icon icon="fa-picture-o"></ons-icon>
            </ons-speed-dial-item>
            <ons-speed-dial-item onclick="TL_change(3)">
                <ons-icon icon="md-collection-image-o"></ons-icon>
            </ons-speed-dial-item>
        </ons-speed-dial>
        <ons-bottom-toolbar id="simple_toot_TL_toolbar">
            <form id="simple_toot_form">
                <input type="hidden" id="nsfw_input_simple">
                <input type="hidden" id="localonly_input_simple">
                <input type="hidden" id="post_mode_simple" value="public">
                <input type="hidden" id="post_reply_simple">
                <ons-list>
                    <ons-list-item style="padding-left: 0" class="simple-toot">
                        <div class="left" style="padding-right: 6px">
                            <ons-button modifier="quiet" onclick="fn.open()" class="no-rd"><ons-icon icon="fa-bars"></ons-icon></ons-button>
                        </div>
                        <div class="center">
                            <textarea class="textarea w-max" rows="1" placeholder="トゥート！" id="simple_toot_TL_input" onFocus="simple_open()" onkeyup="check_limit(value, 'toot_limit_simple', 'toot-button_simple', 'simple_toot_cw');"></textarea>
                        </div>
                        <div class="right" style="padding-right: 0">
                            <ons-button modifier="quiet" class="no-rd" onclick="post('simple_toot_TL_input', {cw:document.getElementById('simple_toot_cw').value, visibility:document.getElementById('post_mode_simple').value, sensitive:document.getElementById('nsfw_input_simple').value, in_reply_to_id: document.getElementById('post_reply_simple').value, local_only: document.getElementById('localonly_input_simple').value}, true)" id="toot-button_simple"><ons-icon icon="fa-paper-plane-o"></ons-icon></ons-button>
                        </div>
                    </ons-list-item>
                </ons-list>
                <ons-list>
                    <ons-list-item style="padding-left: 0" class="simple-toot invisible" id="simple_more">
                        <ons-button modifier="quiet" onclick="post_mode(true)" class="no-rd" id="post_mode_bt_simple">公開</ons-button>
                        <ons-button modifier="quiet" onclick="showPopover(this, 'image_popover')" class="no-rd" id="new_up_bt_simple"><ons-icon icon="fa-picture-o"></ons-icon></ons-button>
                        <ons-button modifier="quiet" onclick="showPopover(this, 'cw_popover')" class="no-rd">CW</ons-button>
                        <ons-button onclick="post_localonly(true)" id="localonly_bt_simple" modifier="quiet" class="no-rd"><ons-icon icon="fa-home"></ons-icon></ons-button>
                        <ons-button modifier="quiet" onclick="showPopover(this, 'tools_popover')" class="no-rd" id="tools_bt_simple"><ons-icon icon="fa-magic"></ons-icon></ons-button>
                        <ons-button modifier="quiet" onclick="showPopover(this, 'emoji_popover')" class="no-rd" id="simple_emoji_bt"><ons-icon icon="fa-smile-o"></ons-icon></ons-button>
                        <ons-button modifier="quiet" class="no-rd" id="toot_limit_simple">4096</ons-button>
                        <ons-button modifier="quiet" class="no-rd" onclick="simple_close()"><ons-icon icon="fa-chevron-down"></ons-icon></ons-button>
                    </ons-list-item>
                </ons-list>
            </form>
        </ons-bottom-toolbar>

        <ons-popover direction="up" id="tools_popover">
            <div style="padding: 10px; text-align: center;">
                <p>
                    <ons-button onclick="hidePopover('tools_popover');showPopover(document.getElementById('tools_bt_simple'), 'vote_popover')" class="w-max"><ons-icon icon="fa-align-left"></ons-icon> Enquete</ons-button>
                    <ons-button onclick="hidePopover('tools_popover');show_bbcodegen('simple_toot_TL_input')" class="w-max" style="margin-top: 5px"><ons-icon icon="fa-font"></ons-icon> BBCode</ons-button>
                    <ons-button onclick="hidePopover('tools_popover');openDoodle('simple')" class="w-max" style="margin-top: 5px"><ons-icon icon="fa-paint-brush"></ons-icon> Doodle</ons-button>
                </p>
                <p>
                    <ons-button onclick="hidePopover('tools_popover')" class="w-max">閉じる</ons-button>
                </p>
            </div>
        </ons-popover>

        <ons-popover direction="up" id="cw_popover">
            <div style="padding: 10px; text-align: center;">
                <p>
                    <ons-input id="simple_toot_cw" modifier="underbar" placeholder="警告文を書いてください" class="w-max black_text" onkeyup="check_limit(value, 'toot_limit_simple', 'toot-button_simple', 'simple_toot_TL_input');"></ons-input>
                </p>
                <p>
                    <ons-button onclick="hidePopover('cw_popover')" class="w-max">閉じる</ons-button>
                </p>
            </div>
        </ons-popover>

        <ons-popover direction="up" id="image_popover">
            <div style="padding: 10px; text-align: center;">
                <p>
                <div id="image_list_simple"></div>
                </p>
                <p>
                    <ons-button onclick="up_file(true)" class="w-max">画像追加</ons-button>
                </p>
                <p>
                    <ons-button onclick="post_nsfw(true)" style="margin-bottom: 5px" id="nsfw_bt_simple" modifier="quiet"><ons-icon icon="fa-eye"></ons-icon> NSFW</ons-button>
                    <ons-button onclick="hidePopover('image_popover')" class="w-max">閉じる</ons-button>
                </p>
            </div>
        </ons-popover>

        <ons-popover direction="up" id="vote_popover">
            <div style="padding: 10px; text-align: center;">
                <p>
                <form id="simple_vote">
                    <ons-input id="vote_new_1_simple" modifier="underbar" placeholder="項目1" class="w-max black_text"></ons-input>
                    <ons-input id="vote_new_2_simple" modifier="underbar" placeholder="項目2" class="w-max black_text"></ons-input>
                    <ons-input id="vote_new_3_simple" modifier="underbar" placeholder="項目3(任意)" class="w-max black_text"></ons-input>
                    <ons-input id="vote_new_4_simple" modifier="underbar" placeholder="項目4(任意)" class="w-max black_text"></ons-input>
                    <ons-select id="vote_new_time_simple" class="w-max black_text" modifier="underbar">
                        <option value="30">30秒</option>
                        <option value="60">1分</option>
                        <option value="180">3分</option>
                        <option value="300">5分</option>
                        <option value="600">10分</option>
                        <option value="3600">1時間</option>
                        <option value="86400">1日</option>
                    </ons-select>
                </form>
                </p>
                <p>
                    <ons-button onclick="hidePopover('vote_popover')" class="w-max">閉じる</ons-button>
                </p>
            </div>
        </ons-popover>
    </ons-page>
</ons-template>

<ons-template id="alert.html">
    <ons-page>
        <ons-toolbar>
            <div class="left" id="alert_button">
                <ons-toolbar-button onclick="fn.open()">
                    <ons-icon icon="fa-bars"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center">通知</div>
            <div class="right">
                <ons-toolbar-button onclick="show('clear-alert')">
                    <ons-icon icon="trash"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <ons-pull-hook id="ph-alert" class="dark-bg">
            <ons-icon icon="fa-refresh" class="white"></ons-icon>
        </ons-pull-hook>
        <div id="alert_main">
            <div class="loading-now">
                <ons-progress-circular indeterminate></ons-progress-circular>
            </div>
        </div>
        <ons-speed-dial position="bottom right" direction="up" id="alert-speed_dial" class="invisible">
            <ons-fab onclick="BackTab()">
                <ons-icon icon="fa-chevron-left"></ons-icon>
            </ons-fab>
        </ons-speed-dial>
    </ons-page>
</ons-template>

<ons-template id="config.html">
    <ons-page id="config-page">
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="fn.open()">
                    <ons-icon icon="fa-bars"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center">設定</div>
        </ons-toolbar>
        <ons-list>
            <ons-list-item modifier="chevron" onclick="openURL('https://' + inst + '/about/more')">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-book fa fa-fw"></i>
                </div>
                <div class="center">
                    インスタンス情報
                </div>
            </ons-list-item>
            <ons-list-item modifier="chevron" tappable onclick="loadNav('about.html', null, true, true)">
                <div class="left">
                    <i class="list-item__icon list-item--chevron__icon ons-icon fa-book fa fa-fw"></i>
                </div>
                <div class="center">
                    このアプリについて
                </div>
            </ons-list-item>
        </ons-list>
        <ons-list>
            <ons-list-header>タイムライン設定</ons-list-header>
            <ons-list-item>
                <div class="center">
                    ジョークモード
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'joke')" input-id="conf-joke"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    リアルタイム更新
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'realtime')" input-id="conf-realtime"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    CW文章を常に表示する
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'cw')" input-id="conf-cw"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    NSFWメディアを常に表示する
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'nsfw')" input-id="conf-nsfw"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    <span class="list-item__title">TLをスライドして切り替え(非推奨)</span><span class="list-item__subtitle">スクロールと被って使いづらいです</span>
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'swipe')" input-id="conf-swipe"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    トゥートの折りたたみ
                </div>
                <div class="right">
                    <ons-button onclick="loadNav('config_collapse.html')">設定</ons-button>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    <span class="list-item__title">ヘッダを押した時にTLをリセット</span><span class="list-item__subtitle">リセットさせる事で軽くなります</span>
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'head_reset')" input-id="conf-head_reset"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    <span class="list-item__title">トゥート中に更新を止める</span><span class="list-item__subtitle">(コピペできないため)</span>
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'st_stop')" input-id="conf-st_stop"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    スピードダイヤル設定
                </div>
                <div class="right">
                    <ons-select id="conf-dial" onchange="change_conf(1, 'dial', true)">
                        <option value="">なし</option>
                        <option value="toot" id="dial_toot">トゥート</option>
                        <option value="alert" id="dial_alert">通知</option>
                        <option value="reload" id="dial_reload">TL更新</option>
                        <option value="change" id="dial_change">TLメニュー</option>
                    </ons-select>
                </div>
            </ons-list-item>
        </ons-list>
        <ons-list>
            <ons-list-header>表示設定</ons-list-header>
            <ons-list-item>
                <div class="center">
                    <span class="list-item__title">大きなお気に入りボタン</span><span class="list-item__subtitle">for おにいさん</span>
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'bigfav')" input-id="conf-bigfav"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    回転を無効化
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'spin')" input-id="conf-spin"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    メニューにお気に入り一覧を表示
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'menu-fav')" input-id="conf-menu-fav"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    <span class="list-item__title">通知ページに戻るスピダイを表示</span><span class="list-item__subtitle">TLスピダイからの移動のみ有効です</span>
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'alert-back')" input-id="conf-alert-back"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    メディアを完全に表示
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'image_full')" input-id="conf-image_full"></ons-switch>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    テーマ
                </div>
                <div class="right">
                    <ons-select id="conf-theme" onchange="change_conf(1, 'theme', true)">
                        <option value="">default</option>
                        <option value="css/theme/dark.css" id="theme_css/theme/dark.css">dark</option>
                    </ons-select>
                </div>
            </ons-list-item>
        </ons-list>
        <ons-list>
            <ons-list-header>システム設定</ons-list-header>
            <ons-list-item>
                <div class="center">
                    URLの開き方
                </div>
                <div class="right">
                    <ons-select id="conf-url_open" onchange="change_conf(1, 'url_open', true)">
                        <option value="">アプリ内ブラウザ</option>
                        <option value="Inapp" id="url_Inapp">アプリ内ブラウザ(旧)</option>
                        <option value="OS" id="url_OS">OSブラウザ</option>
                    </ons-select>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    <span class="list-item__title">スワイプしてメニューを開く</span><span class="list-item__subtitle">端末によっては使いづらいです</span>
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(1, 'swipe_menu')" input-id="conf-swipe_menu"></ons-switch>
                </div>
            </ons-list-item>
        </ons-list>
        <div class="container">
            <p class="note">一部の設定は再起動後に反映されます。</p>
        </div>
    </ons-page>
</ons-template>

<ons-template id="config_collapse.html">
    <ons-page id="config_collapse-page">
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    設定
                </ons-toolbar-button>
            </div>
            <div class="center">トゥート折りたたみ</div>
        </ons-toolbar>
        <ons-list>
            <ons-list-item>
                <div class="center">
                    折りたたみを有効化
                </div>
                <div class="right">
                    <ons-switch onclick="change_conf(2, 'collapse')" input-id="conf-col-collapse"></ons-switch>
                </div>
            </ons-list-item>
        </ons-list>
        <ons-list>
            <ons-list-header>自動折りたたみ</ons-list-header>
            <ons-list-item tappable onclick="change_conf(2, 'all')">
                <label class="left"><ons-checkbox input-id="conf-col-all"></ons-checkbox></label>
                <label for="conf-col-all" class="center">すべて</label>
            </ons-list-item>
            <ons-list-item tappable onclick="change_conf(2, 'alert')">
                <label class="left"><ons-checkbox input-id="conf-col-alert"></ons-checkbox></label>
                <label for="conf-col-alert" class="center">通知</label>
            </ons-list-item>
            <ons-list-item tappable onclick="change_conf(2, 'leng')">
                <label class="left"><ons-checkbox input-id="conf-col-leng"></ons-checkbox></label>
                <label for="conf-col-leng" class="center">長いトゥート</label>
            </ons-list-item>
            <ons-list-item tappable onclick="change_conf(2, 'bs')">
                <label class="left"><ons-checkbox input-id="conf-col-bs"></ons-checkbox></label>
                <label for="conf-col-bs" class="center">ブースト</label>
            </ons-list-item>
            <ons-list-item tappable onclick="change_conf(2, 're')">
                <label class="left"><ons-checkbox input-id="conf-col-re"></ons-checkbox></label>
                <label for="conf-col-re" class="center">返信</label>
            </ons-list-item>
            <ons-list-item tappable onclick="change_conf(2, 'media')">
                <label class="left"><ons-checkbox input-id="conf-col-media"></ons-checkbox></label>
                <label for="conf-col-media" class="center">メディアトゥート</label>
            </ons-list-item>
        </ons-list>
        <ons-list>
            <ons-list-header>背景</ons-list-header>
            <ons-list-item tappable onclick="change_conf(2, 'bg')">
                <label class="left"><ons-checkbox input-id="conf-col-bg"></ons-checkbox></label>
                <label for="conf-col-bg" class="center">折りたたみ時の背景を変更</label>
            </ons-list-item>
            <ons-list-item tappable onclick="change_conf(2, 'preview')">
                <label class="left"><ons-checkbox input-id="conf-col-preview"></ons-checkbox></label>
                <label for="conf-col-preview" class="center">メディアプレビュー</label>
            </ons-list-item>
        </ons-list>
    </ons-page>
</ons-template>

<ons-template id="post.html">
    <ons-page id="toot-page">
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab('down')">
                    <ons-icon icon="fa-times"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center">トゥート！</div>
            <div class="right">
                <ons-toolbar-button onclick="show_bbcodegen('toot_textarea', 'toot-limit', 'toot-button')">
                    <ons-icon icon="fa-font"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <p></p>
        <div class="container">
            <div class="reply-box invisible" id="post_reply_box"><ons-icon icon="fa-reply"></ons-icon>　<span id="post_reply_acct"></span> へ返信</div>
            <div id="vote_new_list" style="display: none;">
                <p>
                    <ons-input id="vote_new_1" modifier="underbar" placeholder="項目1" class="w-max"></ons-input>
                    <ons-input id="vote_new_2" modifier="underbar" placeholder="項目2" class="w-max"></ons-input>
                    <ons-input id="vote_new_3" modifier="underbar" placeholder="項目3(任意)" class="w-max"></ons-input>
                    <ons-input id="vote_new_4" modifier="underbar" placeholder="項目4(任意)" class="w-max"></ons-input>
                    <ons-select id="vote_new_time" class="w-max" modifier="underbar">
                        <option value="30">30秒</option>
                        <option value="60">1分</option>
                        <option value="180">3分</option>
                        <option value="300">5分</option>
                        <option value="600">10分</option>
                        <option value="3600">1時間</option>
                        <option value="86400">1日</option>
                    </ons-select>
                </p>
            </div>
            <ons-input id="cw_input" modifier="underbar" placeholder="警告文を書いてください" class="w-max" style="display: none;" onkeyup="check_limit(value, 'toot-limit', 'toot-button', 'toot_textarea');"></ons-input>
            <textarea class="textarea dark-box-in" rows="5" placeholder="今なにしてる？" id="toot_textarea" style="width: 100%" onkeyup="check_limit(value, 'toot-limit', 'toot-button', 'cw_input');"></textarea>
            <div class="dark-box" style="border-radius: 0">
                <input type="hidden" id="nsfw_input">
                <input type="hidden" id="localonly_input">
                <input type="hidden" id="post_mode" value="public">
                <input type="hidden" id="post_reply">
                <ons-button modifier="quiet" onclick="up_file()" style="border-radius: 0" id="new_up_bt"><ons-icon icon="fa-picture-o"></ons-icon></ons-button>
                <ons-button modifier="quiet" onclick="post_nsfw()" style="border-radius: 0" class="invisible" id="nsfw_bt"><ons-icon icon="fa-eye"></ons-icon></ons-button>
                <ons-button modifier="quiet" onclick="post_cw()" style="border-radius: 0" id="cw_bt">CW</ons-button>
                <ons-button modifier="quiet" onclick="post_vote()" style="border-radius: 0" id="vote_bt"><ons-icon icon="fa-align-left"></ons-icon></ons-button>
                <ons-button modifier="quiet" onclick="openDoodle()"><ons-icon icon="fa-paint-brush"></ons-icon></ons-button>
                <ons-button modifier="quiet" onclick="showPopover(this, 'toot_emoji_popover')" id="toot_emoji_bt"><ons-icon icon="fa-smile-o"></ons-icon></ons-button>
            </div>
            <div class="dark-box">
                <ons-button modifier="quiet" onclick="post_mode()" style="border-radius: 0 0 0 4px" id="post_mode_bt">公開</ons-button>
                <ons-button modifier="quiet" onclick="post_localonly()" style="border-radius: 0" id="localonly_bt"><ons-icon icon="fa-home"></ons-icon></ons-button>
                <span style="float: right">
                <b id="toot-limit" class="toot-limit">4096</b>
                <ons-button onclick="post('toot_textarea', {cw:document.getElementById('cw_input').value, visibility:document.getElementById('post_mode').value, sensitive:document.getElementById('nsfw_input').value, in_reply_to_id: document.getElementById('post_reply').value, local_only: document.getElementById('localonly_input').value})" id="toot-button" style="border-radius: 4px 0 4px 0;padding-bottom: 5px;">トゥート！</ons-button>
                </span>
            </div>
            <div id="image_list"></div>
        </div>

    </ons-page>
</ons-template>

<ons-template id="bbcode.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
            <div class="center">BBCode</div>
            <div class="right">
                <ons-toolbar-button onclick="bbcodegen()">
                    <ons-icon icon="fa-plus"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <p></p>
        <input type="hidden" id="bbcode_color">
        <div class="container">
            <p>
                <ons-input id="bbcode_text" modifier="underbar" placeholder="文字列" class="w-max"></ons-input>
            </p>
        </div>
        <ons-list>
            <ons-list-item>
                <div class="center">
                    基本
                </div>
                <div class="right">
                    <ons-select id="bbcode_base" modifier="underbar">
                        <option value="">なし</option>
                        <option value="b"><b>太字</b></option>
                        <option value="i"><i>斜体</i></option>
                        <option value="u"><u>アンダーライン</u></option>
                        <option value="s"><s>取り消し</s></option>
                    </ons-select>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    色指定
                </div>
                <div class="right">
                    <div class="color-box-mini" id="color-box-mini"></div>　
                    <ons-button onclick="color_mode=null;loadNav('color.html')">変更</ons-button>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    大きさ
                </div>
                <div class="right">
                    <ons-select id="bbcode_large" modifier="underbar">
                        <option value="">1x</option>
                        <option value="2">2x</option>
                        <option value="3">3x</option>
                        <option value="4">4x</option>
                        <option value="5">5x</option>
                    </ons-select>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    回転
                </div>
                <div class="right">
                    <ons-input id="bbcode_spin" modifier="underbar" type="number" value=0></ons-input>
                </div>
            </ons-list-item>
            <ons-list-item>
                <div class="center">
                    点滅
                </div>
                <div class="right">
                    <ons-input id="bbcode_pulse" modifier="underbar" type="number" value=0></ons-input>
                </div>
            </ons-list-item>
        </ons-list>
    </ons-page>
</ons-template>

<ons-template id="color.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
            <div class="center">カラー選択</div>
        </ons-toolbar>
        <p></p>
        <div class="container">
            <div id="color-default">
                <div class="row">
                    <div class="col-xs-4 color-box-base" onclick="bbcode_color()"><div class="color-box">(標準)</div></div>
                </div>
                <hr>
            </div>
            <div class="row">
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('d95959')"><div class="color-box" style="background-color: #d95959;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('b47434')"><div class="color-box" style="background-color: #b47434;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('8e8e0e')"><div class="color-box" style="background-color: #8e8e0e;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('62a222')"><div class="color-box" style="background-color: #62a222;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('35b535')"><div class="color-box" style="background-color: #35b535;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('2eae6e')"><div class="color-box" style="background-color: #2eae6e;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('26a6a6')"><div class="color-box" style="background-color: #26a6a6;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('4c8ccc')"><div class="color-box" style="background-color: #4c8ccc;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('7171f1')"><div class="color-box" style="background-color: #7171f1;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('9e5ede')"><div class="color-box" style="background-color: #9e5ede;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('cb4bcb')"><div class="color-box" style="background-color: #cb4bcb;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('d25292')"><div class="color-box" style="background-color: #d25292;"></div></div>
            </div>
            <hr>
            <div class="row">
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('FF0000')"><div class="color-box" style="background-color: #FF0000;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('0000FF')"><div class="color-box" style="background-color: #0000FF;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('FFFF00')"><div class="color-box" style="background-color: #FFFF00;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('008000')"><div class="color-box" style="background-color: #008000;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('000000')"><div class="color-box" style="background-color: #000000;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('FFFFFF')"><div class="color-box" style="background-color: #FFFFFF;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('87CEEB')"><div class="color-box" style="background-color: #87CEEB;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('FF5B92')"><div class="color-box" style="background-color: #FF5B92;"></div></div>
                <div class="col-xs-4 color-box-base" onclick="bbcode_color('A55A4A')"><div class="color-box" style="background-color: #A55A4A;"></div></div>
            </div>
        </div>
    </ons-page>
</ons-template>

<ons-template id="doodle.html">
    <ons-page id="doodle-page">
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="closeDoodle()">
                    <ons-icon icon="fa-times"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center">
                <ons-toolbar-button onclick="showPopover(this, 'doodle_popover')">
                    <ons-icon icon="fa-ellipsis-h"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="right">
                <ons-toolbar-button onclick="Doodle_changeMode()">
                    <ons-icon icon="fa-pencil" id="doodle_pen_bt"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <ons-popover direction="down" id="doodle_popover">
            <div>
                <ons-list>
                    <ons-list-item>
                        <div class="left">
                        	<ons-button class="no-rd" modifier="quiet" onclick="Doodle_upload()"><ons-icon icon="fa-cloud-upload"></ons-icon></ons-button>
                        </div>
                        <div class="right">
                            <ons-button class="no-rd" modifier="quiet" onclick="Doodle_reset()"><ons-icon icon="fa-eraser"></ons-icon></ons-button>
                        </div>
                    </ons-list-item>
                    <ons-list-item>
                        <div class="center">
                            Smooth
                        </div>
                        <div class="right">
                            <ons-switch onclick="Doodle_config('smooth')" input-id="doodle_smooth"></ons-switch>
                        </div>
                    </ons-list-item>
                    <ons-list-item>
                        <div class="center">
                            Adaptive
                        </div>
                        <div class="right">
                            <ons-switch onclick="Doodle_config('adaptive')" input-id="doodle_adaptive"></ons-switch>
                        </div>
                    </ons-list-item>
                    <ons-list-item>
                        <div class="center">
                            色
                        </div>
                        <div class="right">
                            <div class="color-box-mini" id="doodle-color-box-mini" style="background-color: rgb(0, 0, 0);"></div>　
                            <ons-button onclick="color_mode='doodle';show_colorpicker()">変更</ons-button>
                        </div>
                    </ons-list-item>
                    <ons-list-item>
                        <div class="center">
                            太さ
                        </div>
                        <div class="right">
                            <ons-input modifier="underbar" type="number" value=2 id="doodle_weight" onchange="sketcher.weight=parseInt(document.getElementById('doodle_weight').value)"></ons-input>
                        </div>
                    </ons-list-item>
                    <ons-list-item style="padding-left: 6px;">
                        <div class="center">
                            <ons-button onclick="hidePopover('doodle_popover')" class="w-max y-center">閉じる</ons-button>
                        </div>
                    </ons-list-item>
                </ons-list>
            </div>
        </ons-popover>
        <canvas id="mySketcher"></canvas>
    </ons-page>
</ons-template>

<ons-template id="showtoot.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
        </ons-toolbar>

        <div id="show_toot">
            <div class="loading-now">
                <ons-progress-circular indeterminate></ons-progress-circular>
            </div>
        </div>
    </ons-page>
</ons-template>

<ons-template id="showtag.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
            <div class="center" id="showtag_title">
                読み込み中...
            </div>
            <div class="right">
                <ons-toolbar-button onclick="post_pre('#'+ decodeURI(tag_str))">
                    <ons-icon icon="fa-pencil"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>

        <div id="tag_main">
            <div class="loading-now">
                <ons-progress-circular indeterminate></ons-progress-circular>
            </div>
        </div>
    </ons-page>
</ons-template>

<ons-template id="olist.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="fn.open()">
                    <ons-icon icon="fa-bars"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center" id="olist_title">読み込み中...</div>
        </ons-toolbar>

        <div id="olist_main">
            <div class="loading-now">
                <ons-progress-circular indeterminate></ons-progress-circular>
            </div>
        </div>
    </ons-page>
</ons-template>

<ons-template id="olist_nav.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
            <div class="center" id="olist_nav_title">読み込み中...</div>
        </ons-toolbar>

        <div id="olist_nav_main">
            <div class="loading-now">
                <ons-progress-circular indeterminate></ons-progress-circular>
            </div>
        </div>
    </ons-page>
</ons-template>

<ons-template id="account.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
            <div class="center" id="userpage-title">読み込み中...</div>
        </ons-toolbar>
        <div id="acct-moved-base" class="invisible">
            <p class="moved-text"><ons-icon icon="fa-suitcase"></ons-icon> 引っ越しました:</p>
            <div id="acct-moved"></div>
        </div>
        <input type="hidden" id="acct_block">
        <input type="hidden" id="acct_mute">
        <div class="userpage-button-bg">
            <ons-icon icon="fa-bars" class="userpage-button" onclick="account_action(account_page_id)" id="acct_action_bt"></ons-icon>
        </div>
        <div class="userpage-button-bg userpage-button-right">
            <ons-icon icon="fa-user-plus" class="userpage-button" id="userpage-follow-button" onclick="account_state_action(account_page_id, this, 'follow')"></ons-icon>
            <div class="userpage-follower invisible" id="userpage-followreq-badge">承認待ち</div>
            <div class="userpage-follower invisible" id="userpage-follower-badge">フォロワー</div>
            <div class="userpage-follower invisible" id="userpage-mute-badge">ミュート中</div>
            <div class="userpage-follower invisible" id="userpage-block-badge">ブロック中</div>
        </div>
        <div class="user-bg y-center" id="userpage-bg">
            <img src="img/missing.png" id="userpage-icon" class="user-logo-profile" />
            <div class="card-bio">
                <h3 id="userpage-name" class="user-name"></h3>
                <div class="user-acct"><span id="userpage-acct"></span> <ons-icon icon="fa-lock" id="userpage-lock" class="invisible"></ons-icon></div>
                <div class="user-bio" id="userpage-bio"></div>
                <div class="user-follow">
                    <span onclick="list('accounts/'+account_page_id+'/following', 'フォロー一覧', null, 'acct', true)"><b id="userpage-follow"></b> フォロー</span> / <span onclick="list('accounts/'+account_page_id+'/followers', 'フォロワー一覧', null, 'acct', true)"><b id="userpage-follower"></b> フォロワー</span>
                </div>
            </div>
        </div>
        <div class="account_bar" style="border-bottom: none;">
            <div class="account_links">
                <span class="account_tab_l" style="width: 100%;" id="userpage-hint"><span class="note">リモートアカウントの為、情報が不正確な可能性があります。</span></span>
            </div>
        </div>
        <div class="account_bar">
            <div class="account_links">
                <span class="account_tab_l" onclick="showAccountTL(account_page_id)">トゥート (<b id="userpage-post-count"></b>)</span>
                <span class="account_tab_r" onclick="showAccountTL(account_page_id, null, true)">メディア</span>
            </div>
        </div>
        <div id="account_pinned_toot"></div>
        <div id="account_toot">
            <div class="loading-now">
                <ons-progress-circular indeterminate></ons-progress-circular>
            </div>
        </div>
    </ons-page>
</ons-template>

<ons-template id="about.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab()">
                    <ons-icon icon="fa-chevron-left"></ons-icon>
                    戻る
                </ons-toolbar-button>
            </div>
            <div class="center">このアプリについて</div>
        </ons-toolbar>
        <p></p>
        <div class="container">
            <div class="w-max main-logo y-center">
                <img src="img/logo.svg" style="width: 80%;"/>
            </div>
            <p>
                <b>神崎丼アプリ 1.0.5</b>
            </p>
            <span class="fa fa-spin"><b>南無！ｗ</b></span>
            <p></p>
            <p>
                KnzkAppはオープンソースソフトウェアです。<br><a href="https://github.com/KnzkDev/KnzkApp" target="_blank"><i class="fa fa-github"></i> KnzkDev/KnzkApp</a> から開発に参加したり、問題を報告する事ができます。
            </p>
        </div>
        <ons-list>
            <ons-list-header>クレジット</ons-list-header>
            <ons-list-item onclick="openURL('https://knzk.me/@y')">アプリ開発: ねじりわさび</ons-list-item>
            <ons-list-item onclick="openURL('https://knzk.me/@annotunzdy')">アプリ開発 / iOS版配布: あんのたん</ons-list-item>
            <ons-list-item onclick="openURL('https://knzk.me/@twotwo')">前ロゴ画像: ネイティオ</ons-list-item>
            <ons-list-item onclick="openURL('https://knzk.me/@imncls')">ロゴ画像: NCLS</ons-list-item>
        </ons-list>
    </ons-page>
</ons-template>

<ons-template id="login.html">
    <ons-page id="login-page">
        <ons-toolbar>
            <div class="left" id="login_left"></div>
            <div class="center">
                KnzkAppにログイン
            </div>
            <div class="right">
                <ons-toolbar-button onclick="loadNav('about.html')">
                    <ons-icon icon="fa-info-circle"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <div class="container">
            <div class="y-center">
                <div class="w-max main-logo login_list invisible" id="login_debug">
                    <p><b>デバッガーでログイン</b></p>

                    <p class="y-center">
                        <ons-input id="login_debug_domain" modifier="underbar" placeholder="Domain" value="knzk.me" float style="width: 80%;"></ons-input>
                        <ons-input id="login_debug_token" modifier="underbar" placeholder="Token" float style="width: 80%;"></ons-input>
                    </p>
                    <p class="y-center">
                        <ons-button onclick="debug_login()" style="width: 80%;"><b>ログイン</b></ons-button>
                    </p>
                </div>
                <!--
                <div class="w-max main-logo login_list invisible" id="login_debug">
                    <p><b>デバッガーでログイン</b></p>

                    <p class="y-center">
                        <ons-input id="login_debug_domain" modifier="underbar" placeholder="Domain" value="knzk.me" float style="width: 80%;"></ons-input>
                        <ons-input id="login_debug_token" modifier="underbar" placeholder="Token" float style="width: 80%;"></ons-input>
                    </p>
                    <p class="y-center">
                        <ons-button onclick="debug_login()" style="width: 80%;"><b>ログイン</b></ons-button>
                    </p>
                </div>

                <div class="w-max main-logo login_list">
                    <p><b>Knzk.me</b></p>
                    <img src="img/logo.svg" style="width: 60%;"/>
                    <p class="y-center"><ons-button onclick="login_open('knzk.me')" style="width: 80%;"><b>ログイン</b></ons-button></p>
                    <p><a href="https://knzk.me/about/more">利用規約</a> | <a href="https://knzk.me/terms">プライバシーポリシー</a></p>
                </div>
                <div class="w-max main-logo login_list">
                    <p><b>now.kibousoft.co.jp</b></p>
                    <p class="y-center"><ons-button onclick="login_open('now.kibousoft.co.jp')" style="width: 80%;"><b>ログイン</b></ons-button></p>
                    <p><a href="https://now.kibousoft.co.jp/about/more">利用規約</a> | <a href="http://kibousoft.com/privacy.html">プライバシーポリシー</a></p>
                </div>
                <div class="w-max main-logo login_list">
                    <p><b>他のインスタンス</b></p>
                    <ons-input id="inst_url" modifier="underbar" placeholder="mastodon.social" float></ons-input>
                    <p class="y-center"><ons-button onclick="login_open_c(document.getElementById('inst_url').value)" style="width: 80%;"><b>ログイン</b></ons-button></p>
                </div>

               -->
                <div class="w-max main-logo login_list" style="margin-bottom: 10px">
                    <p><b>KnzkApp</b></p>
                    <p><img src="img/logo.svg" style="width: 60%;"/></p>
                </div>
            </div>
        </div>
        <ons-list modifier="inset">
            <ons-list-header>Mastodon / Pleromaにログイン</ons-list-header>
            <ons-list-item modifier="longdivider" onclick="login_open('Knzk.me')">Knzk.me</ons-list-item>
            <ons-list-item modifier="longdivider" onclick="login_open('now.kibousoft.co.jp')">now.kibousoft.co.jp</ons-list-item>
            <ons-list-item modifier="longdivider" onclick="login_open('pleroma.knzk.me')">pleroma.knzk.me</ons-list-item>
            <ons-list-item modifier="longdivider" onclick="login_open('plero.ma')">plero.ma</ons-list-item>
            <ons-list-item modifier="longdivider" onclick="login_open_c()">その他のインスタンス</ons-list-item>
        </ons-list>
        <p></p>
        <ons-list modifier="inset">
            <ons-list-header>Diasporaにログイン</ons-list-header>
            <ons-list-item modifier="longdivider">diaspora.knzk.me</ons-list-item>
            <ons-list-item modifier="longdivider">その他のポッド</ons-list-item>
        </ons-list>
        <p></p>
        <ons-list modifier="inset">
            <ons-list-header>GNU Socialにログイン</ons-list-header>
            <ons-list-item modifier="longdivider">サーバーを指定</ons-list-item>
        </ons-list>
    </ons-page>
</ons-template>

<ons-template id="tutorial.html">
    <ons-page>
        <ons-toolbar>
            <div class="left">
                <ons-toolbar-button onclick="BackTab('down')">
                    <ons-icon icon="fa-times"></ons-icon>
                    終了
                </ons-toolbar-button>
            </div>
            <div class="center">KnzkAppへようこそ</div>
        </ons-toolbar>
    </ons-page>
</ons-template>

<ons-popover direction="up" id="emoji_popover">
    <div style="padding: 5px; text-align: center;">
        <p id="emoji_list_popover" class="emoji_list_scroll">load</p>
        <p>
            <ons-button onclick="hidePopover('emoji_popover')" class="w-max">閉じる</ons-button>
        </p>
    </div>
</ons-popover>

<ons-popover direction="down" id="toot_emoji_popover">
    <div style="padding: 5px; text-align: center;">
        <p id="toot_emoji_list_popover" class="emoji_list_scroll" style="height: 150px;">load</p>
        <p>
            <ons-button onclick="hidePopover('toot_emoji_popover')" class="w-max">閉じる</ons-button>
        </p>
    </div>
</ons-popover>

<div id="alert_list">
    <ons-modal direction="up" id="now_loading">
        <div style="text-align: center">
            <p>
                <ons-progress-circular indeterminate></ons-progress-circular>
            </p>
        </div>
    </ons-modal>

    <ons-toast id="loggedin_dialog">
        ログインしました！<button onclick="hide('loggedin_dialog')">閉じる</button>
    </ons-toast>

    <ons-alert-dialog id="delete-post">
        <div class="alert-dialog-title">トゥートを削除</div>
        <div class="alert-dialog-content">
            本当に削除しますか？
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="hide('delete-post')">キャンセル</button>
            <button class="alert-dialog-button" onclick="delete_post()">削除</button>
        </div>
    </ons-alert-dialog>
    <ons-toast id="del-post-ok">
        トゥートを削除しました。
    </ons-toast>

    <ons-alert-dialog id="logout_dialog">
        <div class="alert-dialog-title">ログアウト</div>
        <div class="alert-dialog-content">
            ログアウトしてもよろしいですか？
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="hide('logout_dialog')">戻る</button>
            <button class="alert-dialog-button" onclick="logout()">ログアウト</button>
        </div>
    </ons-alert-dialog>
    <ons-toast id="loggedout_dialog">
        ログアウトしました<button onclick="hide('loggedout_dialog')">閉じる</button>
    </ons-toast>

    <ons-toast id="report-post">
        レポートのご協力ありがとうございます。
    </ons-toast>
    <ons-toast id="ok-clear-alert">
        通知を消去しました。
    </ons-toast>
    <ons-toast id="ok_conf">
        設定を保存しました。
    </ons-toast>
    <ons-toast id="ok_conf_2">
        設定しました。
    </ons-toast>

    <ons-toast id="del_ok">
        削除しました。
    </ons-toast>

    <ons-toast id="post_now">
        投稿しています... <span class="fa fa-spin"><span class="fa fa-spin"><ons-icon icon="fa-refresh" class="white"></ons-icon></span></ons-icon></span>
    </ons-toast>

    <ons-toast id="vote-ok">
        投票に成功しました！
    </ons-toast>
    <ons-toast id="vote-ng">
        投票に失敗しました。<br>
        投票済みか締め切りとなっている可能性があります。
    </ons-toast>
    <!-- エラー -->
    <ons-toast id="maximum-media">
        エラー: これ以上画像をアップする事はできません。
    </ons-toast>
    <ons-toast id="bbcode-limit">
        エラー: 文字数制限を超えています！<br>
        回転や点滅、文字列を少なくしてください。
    </ons-toast>
    <ons-toast id="cannot-pros">
        エラー: 実行できませんでした。<br>
        接続環境が悪いか鯖落ちしている可能性があります。
    </ons-toast>
    <ons-toast id="cannot-post">
        エラー: 投稿できませんでした。<br>
        接続環境が悪いか鯖落ちしている可能性があります。
    </ons-toast>
    <ons-toast id="cannot-load">
        エラー: 取得できませんでした。<br>
        接続環境が悪いか鯖落ちしている可能性があります。
    </ons-toast>
    <ons-alert-dialog id="cannot-get-code">
        <div class="alert-dialog-title">エラー</div>
        <div class="alert-dialog-content">
            コードが取得できませんでした！<br>
            認証画面で拒否していませんか？
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="hide('cannot-get-code')">閉じる</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="clear-alert">
        <div class="alert-dialog-title">通知を消去</div>
        <div class="alert-dialog-content">
            本当に通知を消去してもよろしいですか？
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="hide('clear-alert')">キャンセル</button>
            <button class="alert-dialog-button" onclick="reset_alert()">通知を消去</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="cannot-use-ls">
        <div class="alert-dialog-title">エラー</div>
        <div class="alert-dialog-content">
            OSのバージョンが古い可能性があります。<br>
            詳細は開発者にお問い合わせください。
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="cannot-connect-sv">
        <div class="alert-dialog-title">エラーが発生しました。</div>
        <div class="alert-dialog-content">
            何度試しても問題が解決しない場合は、下記のエラーログを <b>@y@knzk.me</b> までお願いします。
            <pre id="error-log-sv" class="error_log"></pre>
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="init()">再試行</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="cannot-connect-sv-login">
        <div class="alert-dialog-title">エラー</div>
        <div class="alert-dialog-content">
            インスタンスに接続できません！<br>
            このインスタンスが存在しない、一時的にメンテナンス中、通信環境が悪い可能性があります。
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="hide('cannot-connect-sv-login')">閉じる</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="cannot-connect-mastodon">
        <div class="alert-dialog-title">エラー</div>
        <div class="alert-dialog-content">
            インスタンスに接続できません！<br>
            サーバーが落ちている可能性があります。<br>
            詳細はシステム状態のページをご覧ください。
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="openURL('http://knzk.me')">ステータスページへ</button>
            <button class="alert-dialog-button" onclick="init()">再試行</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="cannot-connect-internet">
        <div class="alert-dialog-title">エラー</div>
        <div class="alert-dialog-content">
            インターネットに接続できません！<br>
            通信環境が悪い可能性があります。
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="init()">再試行</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="cannot-connect-API">
        <div class="alert-dialog-title">エラー</div>
        <div class="alert-dialog-content">
            APIを認証できませんでした。<br>
            「認証済みアプリ」からKnzkAppを削除していませんか？
        </div>
        <div class="alert-dialog-footer">
            <button class="alert-dialog-button" onclick="hide('cannot-connect-API');localStorage.removeItem('knzkapp_now_mastodon_username');login_open(inst);">再ログインする</button>
            <button class="alert-dialog-button" onclick="hide('cannot-connect-API');init()">再試行</button>
        </div>
    </ons-alert-dialog>

    <ons-alert-dialog id="DB_migration">
        <div class="alert-dialog-title">起動しています...</div>
        <div class="alert-dialog-content">
            データベースのマイグレーション中です。<br>
            しばらくお待ち下さい...
        </div>
    </ons-alert-dialog>
</div>
</body>
</html>
